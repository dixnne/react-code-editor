syntax = "proto3";

package compiler;

message SemanticError {
    string message = 1;
    uint32 line = 2;
    uint32 column = 3;
}

message Symbol {
    string name = 1;
    string symbol_type = 2;
    string data_type = 3;
    uint32 line = 4;
    uint32 column = 5;
    optional string value = 6;
    uint32 scope_level = 7;
}

message Scope {
    string scope_name = 1;
    uint32 scope_level = 2;
    repeated Symbol symbols = 3;
    repeated Scope children = 4;
}

message SymbolTable {
    Scope root_scope = 1;
}

message AnnotatedNode {
    string node_type = 1;
    string value = 2;
    repeated AnnotatedNode children = 3;
    uint32 start_line = 4;
    uint32 start_column = 5;
    uint32 end_line = 6;
    uint32 end_column = 7;
    string inferred_type = 8;
    optional string evaluated_value = 9;
}

message SemanticAnalysisResponse {
    repeated SemanticError errors = 1;
    SymbolTable symbol_table = 2;
    AnnotatedNode annotated_ast = 3;
}